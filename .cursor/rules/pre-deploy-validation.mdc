---
description: Validação obrigatória antes de fazer deploy/push
alwaysApply: true
---

# Validação Pré-Deploy (OBRIGATÓRIO)

## ANTES de qualquer git push, EXECUTE AUTOMATICAMENTE:

1. **Verificar colunas do banco** - Rodar `execute_sql` com:
   ```sql
   SELECT column_name FROM information_schema.columns WHERE table_name = 'tabela';
   ```

2. **Rodar type-check** - Executar no Shell:
   ```powershell
   npm run type-check
   ```
   Working directory: `f:\Zykor\frontend`

3. **Corrigir erros** - Se houver erros de TypeScript, corrigir ANTES do push.

## Padrões Obrigatórios para APIs

```typescript
// SEMPRE verificar null e usar any[]
const supabase = await getSupabaseClient();
if (!supabase) {
  return NextResponse.json({ error: 'Erro ao conectar' }, { status: 500 });
}
const { data } = await supabase.from('tabela').select('*');
const dados = (data || []) as any[];
```

## NUNCA fazer push sem rodar type-check primeiro.
